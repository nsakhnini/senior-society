<!--
	messages.html
	
	04/29/2018
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Messages</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3mobile.css">
  <link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-indigo.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="js/speechRecognition.js"></script>
  <script src="js/person.js"></script>
  
  <link rel="stylesheet" href="css/sidebarMenu.css">					<!--For sidebar menu-->
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"> <!-- w3 google Icons, only for help icon so far -->
  <link rel="stylesheet" href="css/util.css">
  
</head>
<style>
  .container {
    border: 2px solid #dedede;
    background-color: #f1f1f1;
    border-radius: 5px;
    padding: 10px;
    margin: 10px 0;
  }

  .darker {
    border-color: #ccc;
    background-color: #ddd;
  }

  .container::after {
    content: "";
    clear: both;
    display: table;
  }

  .container img {
    float: left;
    max-width: 60px;
    width: 100%;
    margin-right: 20px;
    border-radius: 50%;
  }

  .container img.right {
    float: right;
    margin-left: 20px;
    margin-right:0;
  }

  .time-right {
    float: right;
    color: #aaa;
  }

  .time-left {
    float: left;
    color: #999;
  }
  div::-webkit-scrollbar {
    width: 1em;
  }

  div::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
  }

  div::-webkit-scrollbar-thumb {
    background-color: darkgrey;
    outline: 1px solid slategrey;
  }
  div.ex1{
    overflow-y: scroll;
    overflow-x: hidden;
  }

  button{
    background-color: transparent;
    border: none;
    color: black;
    padding: 12px 16px;
    font-size: 16px;
    cursor: pointer;
  }

  /* Darker background on mouse-over */
  button:hover {
    background-color: RoyalBlue;
  }

  /* The Modal (background) */
  .modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    padding-top: 100px; /* Location of the box */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
  }

  /* Modal Content */
  .modal-content {
    position: relative;
    background-color: #fefefe;
    margin: auto;
    padding: 0;
    border: 1px solid #888;
    width: 80%;
    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);
    -webkit-animation-name: animatetop;
    -webkit-animation-duration: 0.4s;
    animation-name: animatetop;
    animation-duration: 0.4s
  }

  /* Add Animation */
  @-webkit-keyframes animatetop {
    from {top:-300px; opacity:0}
    to {top:0; opacity:1}
  }

  @keyframes animatetop {
    from {top:-300px; opacity:0}
    to {top:0; opacity:1}
  }

  /* The Close Button */
  .close {
    color: white;
    float: right;
    font-size: 28px;
    font-weight: bold;
  }

  .close:hover,
  .close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
  }

  .modal-header {
    padding: 2px 16px;
    background-color: #5cb85c;
    color: white;
  }

  .modal-body {padding: 2px 16px;}

  .modal-footer {
    padding: 2px 16px;
    background-color: #5cb85c;
    color: white;
  }
</style>
<body style="">

<!-- Sidebar Menu -->
<nav class="w3-sidebar w3-bar-block w3-card" id="sidebarMenu" style="display: none">
    <div class="w3-container w3-theme-d2">
        <span onclick="closeSidebar()" class="w3-button w3-display-topright w3-large">X</span>
        <br>
        <a href="profile.html" class="w3-padding w3-center">
            <img class="w3-circle" src="https://specials-images.forbesimg.com/imageserve/59d5062131358e542c034eb7/416x416.jpg?background=000000&cropX1=419&cropX2=1409&cropY1=53&cropY2=1044" alt="avatar" style="width:75%">
        </a>
    </div>
    <a class="w3-bar-item w3-button" href="newsfeed.html">
		<i class="fa fa-home fa-2x"></i>
		<h2>Home</h2>
	</a>
    <a class="w3-bar-item w3-button" href="messages.html">
		<i class="fa fa-comments fa-2x"></i>
		<h2>Messages</h2>
	</a>
    <a class="w3-bar-item w3-button" href="friendreq.html">
		<i class="fa fa-users fa-2x"></i>
		<h2>Friends</h2>
	</a>
    <a class="w3-bar-item w3-button" href="setting.html">
		<i class="fa fa-cog fa-2x"></i>
		<h2>Settings</h2>
	</a>
</nav>

<header class="w3-bar w3-card w3-theme">
  <button class="w3-bar-item w3-button w3-xxlarge w3-hover-theme" type="button" onclick="openSidebar()">&#9776;</button>
  <h2 class="w3-bar-item">Messages</h2>
  
  		
	<!-- help button -->
	<button class="w3-button w3-hover-theme w3-right" button onclick="document.getElementById('help').style.display='block'"> <i class="material-icons" id="help_NewsFeed" style="float:right;">help</i> </button>
	
	<!-- help button dialog -->
    <div id="help" class ="w3-modal">
        <div class="w3-modal-content">
            <div class="w3-container" style="color:black">
                <span class="cancel-button w3-button w3-display-topright" onclick="document.getElementById('help').style.display='none'" >&times;</span>
				
				<h2>Messages Help</h2>
				<p>This is the <b>Messages</b> page.  Here you are able to send and recieves messages to and from your friends. 
				<h4>Navigation</h4>
				<p>On the left-hand side of the screen are where your previous Chats are stored. In the middle is the current chat where you can see and send messages. Send messages to your friend in the current open chat by entering whatever you want to say in the bottom text box and then press the 'Send' button.<p>			
				<h4>Start a new Conversation</h4>
				<p>Start messaging a friend by selecting the 'New Chat' button</p>
				<h4>Access other menus or pages</h4>
				<p>Access other menus or pages by clicking the Menu Icon in the top left corner.</p>
            </div>
        </div>
    </div>
</header>
<div class = "w3-bar w3-card w3-theme" style="padding-left:1%; padding-bottom: 5%;">
  <form id="searchForm">
    <div class="wrapper" style="width:85%;">
      <input type="text" id="searchText" style="width:90%; font-size: 30px; padding-top: 0" placeholder="Search a message... " >
      <button class="mic" id="searchMic" type="button" style="width: 8%; padding-top: 5px;"><i class="fa fa-microphone" style="font-size:33px;"></i></button>
    </div>

  </form>
</div>


<div class="w3-cell-row">



  <div class="w3-container w3-cell" style="position: relative;left: auto;width:25%; height:500px">
    <div class="w3-cell" >
      <div id="msg-nav" style="overflow-y: scroll; overflow-x: hidden;position: relative;height:500px; ">
        <div class="w3-container" id="list-group">
        </div>
      </div>
    </div>

  </div>

  <div id="curchat" class="w3-container w3-cell">

    <div style="overflow-y: scroll; overflow-x: hidden;position: relative;left: auto;width:100%; height:500px;">
      <h3>You're Chat With:</h3>
      <h2 id="chatName">Antone Kimmons</h2>
      <div class="container">
        <img src="http://www.sundayapple.lk/wp-content/uploads/2017/02/7e593fb52fb6701b72f61b875635f045.jpg" style="width:100%;">
        <p><h3>Hello. Hey how are you?</h3></p>
        <span class="time-right">11:00</span>
      </div>

      <div class="container darker">
        <img src="http://trade-mgmt.com/wp-content/uploads/2016/08/facebook-default-no-profile-pic.jpg" class="right" style="width:100%;">
        <p><h3>Hey! I'm fine. Thanks for asking!</h3></p>
        <span class="time-left">11:01</span>
      </div>

      <div class="container">
        <img src="http://www.sundayapple.lk/wp-content/uploads/2017/02/7e593fb52fb6701b72f61b875635f045.jpg" style="width:100%;">
        <p><h3>Sweet! So, what do you wanna do today?</h3></p>
        <span class="time-right">11:02</span>
      </div>

      <div class="container darker">
        <img src="http://trade-mgmt.com/wp-content/uploads/2016/08/facebook-default-no-profile-pic.jpg" style="width:100%;">
        <p><h3>Nah, I dunno. Play soccer.. or learn more coding perhaps?</h3></p>
        <span class="time-left">11:05</span>
      </div>


    </div>

  </div>
  <button id="newMsg" class="btn" style="background-color:green; color:white">New Chat</button>
</div>
<div class="w3-cell-row">
  <div class="w3-container w3-cell" style="width:25%"></div>

  <div class="container" id="msgInput" style="width:75%">
    <form action="/action_page.php" id="usrform">
      <textarea id="txtInput" rows="4" cols="50" name="comment" form="usrform" placeholder="Type a message here... " >
      </textarea>
    </form>
    <button id="sendmsg1" style="background:DodgerBlue">Send</button>
  </div>
</div>
</div>


<!-- Trigger/Open The Modal -->

<!-- The Modal -->
<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <div class="modal-header">
      <span class="close">&times;</span>
      <h2>Select a Friend to Message</h2>
    </div>
    <div class="modal-body">
      <div><button id="c1"class="btn">Antone Kimmons<button></div>
      <div><button id="c2" class="btn">Carlie Hallee<button></div>
      <div><button id="c3" class="btn">Diamond Sattler<button></div>
      <div><button id="c4" class="btn">Jestine Primus<button></div>
      <div><button id="c5" class="btn">Ozwell Swink<button></div>
    </div>
  </div>

</div>

<hr>

<footer class="w3-container w3-theme w3-margin-top">

</footer>

<!--Sidebar Menu -->
<script>
    window.onload = function (ev) {
        closeSidebar();
    };
    function openSidebar() {
        document.getElementById("sidebarMenu").style.display = "block";
    }
    function closeSidebar() {
        document.getElementById("sidebarMenu").style.display = "none";
    }
</script>	

<script>

    var img = document.createElement("IMG");
    img.setAttribute("class", "w3-circle");
    img.setAttribute("src", " http://www.sundayapple.lk/wp-content/uploads/2017/02/7e593fb52fb6701b72f61b875635f045.jpg");
    img.setAttribute("width", "100%");

    document.getElementById('searchForm').addEventListener('submit', function(e) {
        //search(document.getElementById('searchText'));
        document.getElementById('searchText').value ="hi";

        e.preventDefault();


    }, false);
    // Get the modal
    var modal = document.getElementById('myModal');

    // Get the button that opens the modal
    var btn = document.getElementById("newMsg");

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks the button, open the modal
    btn.onclick = function() {
        modal.style.display = "block";
    }

    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
        modal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
    closeSidebar();
    function openSidebar() {
        document.getElementById("mySidebar").style.display = "block";
    }
    function closeSidebar() {
        document.getElementById("mySidebar").style.display = "none";
    }
    $(document).ready(function() {
        document.getElementById("sendmsg1").addEventListener("click", sendMsg, false);
        document.getElementById("newMsg").addEventListener("click", newMessage, false);
        document.getElementById("c1").addEventListener("click", addEvent, false);
        document.getElementById("c2").addEventListener("click", addEvent, false);
        document.getElementById("c3").addEventListener("click", addEvent, false);
        document.getElementById("c4").addEventListener("click", addEvent, false);
        document.getElementById("c5").addEventListener("click", addEvent, false);
        convo1=document.getElementById('curchat').innerHTML;
        console.log( "ready!" );
        var screenHeight = $(window).height();
        var j=0;
        console.log( screenHeight);
        for(i=0;i<5;i++){
            j++;
            j++;
            var addF=results[j*i];
            addElement('list-group', 'div','break'+(i).toString(),'<hr>');
            addElement('break'+(i).toString(), 'button', 'p' +(i).toString(), '');
            document.getElementById('p' +(i).toString()).addEventListener("click", addEvent, false);
            document.getElementById('p' +(i).toString()).setAttribute('class','class="w3-cell-row');
            addElement('p' +(i).toString(),'div',"info" + (i).toString(),""  );
            addElement('info' + (i).toString(),'h3',"name" + (i).toString(),""  );
            addElement('p' +(i).toString(), 'div', 'img' +(i).toString() , "");
            if(addF.gender == "F"){
                var img = document.createElement("IMG");
                img.setAttribute("class", "w3-circle");
                img.setAttribute("src", " http://www.sundayapple.lk/wp-content/uploads/2017/02/7e593fb52fb6701b72f61b875635f045.jpg");
                img.setAttribute("width", "100%");
            }
            else{
                var img = document.createElement("IMG");
                img.setAttribute("class", "w3-circle");
                img.setAttribute("src", "http://trade-mgmt.com/wp-content/uploads/2016/08/facebook-default-no-profile-pic.jpg");
                img.setAttribute("width", "100%");
            }
            document.getElementById('p' +(i).toString()).setAttribute('class','class="w3-cell-row');
            document.getElementById('img' +(i).toString()).setAttribute('class','w3-cell' );
            document.getElementById('img' +(i).toString()).setAttribute('style','width:30%' );
            document.getElementById("info"+ (i).toString()).setAttribute('class', 'w3-cell w3-container');


            document.getElementById('img' +(i).toString() ).append(img);
            document.getElementById("name"+ (i).toString()).append(addF.name);
            if(addF.relation == "NONE"){
                document.getElementById('info'+ (i).toString()).append("NOT FRIEND");
            }
            else{
                document.getElementById('info'+ (i).toString()).append("FRIEND");
            }
            document.getElementById('info'+ (i).toString()).innerHTML+="<br>";
            document.getElementById('info'+ (i).toString()).append(addF.work);
            $("list-group"+(i).toString()).innerHTML+="</div>";
            html="<hr>";
        }
    });
    function newMessage(e){

    }
    function addElement(parentId, elementTag, elementId, html) {
        // Adds an element to the document
        var p = document.getElementById(parentId);
        var newElement = document.createElement(elementTag);
        newElement.setAttribute('id', elementId);
        newElement.innerHTML = html;
        p.appendChild(newElement);
    }

    var conversation1;
    var conversation2;
    var conversation3;
    var conversation4;
    var conversation5;

    conversation1="Hey how are you?";
    conversation2=("Miss you!");
    conversation3="Love all the pictures of the grandkids!";
    conversation4="See you at lunch";
    conversation5="It was nice to meet you yesterday";
    var convo1=document.getElementById('curchat').innerHTML;

    var convo2='<h3>You\'re Chat With:</h3><h2 id="chatName">Carlie Hallee</h2><div class="container"><img src="http://trade-mgmt.com/wp-content/uploads/2016/08/facebook-default-no-profile-pic.jpg" class="left" style="width:100%;">'+
        '<p><h3>'+"Miss you!"+'</h3></p><span class="time-left">10:20</span></div>';;

    var convo3='<h3>You\'re Chat With:</h3><h2 id="chatName">Diamond Sattler</h2><div class="container"><img src="http://trade-mgmt.com/wp-content/uploads/2016/08/facebook-default-no-profile-pic.jpg" class="left" style="width:100%;">'+
        '<p><h3>'+conversation3+'</h3></p><span class="time-left">9:20</span></div>';;

    var convo4='<h3>You\'re Chat With:</h3><h2 id="chatName">Jestine Primus</h2><div class="container"><img src="http://trade-mgmt.com/wp-content/uploads/2016/08/facebook-default-no-profile-pic.jpg" class="left" style="width:100%;">'+
        '<p><h3>'+conversation4+'</h3></p><span class="time-left">8:00</span></div>';;

    var convo5='<h3>You\'re Chat With:</h3><h2 id="chatName">Ozwell Swink</h2><div class="container"><img src="http://trade-mgmt.com/wp-content/uploads/2016/08/facebook-default-no-profile-pic.jpg" class="left" style="width:100%;">'+
        '<p></h3>'+conversation5+'</h3></p><span class="time-left">6:20</span></div>';;
    var curChat =0;

    function addEvent(e) {
        var clickedItem = e.target.id;

        if(clickedItem=='p0'|| clickedItem=='info0' || clickedItem=='name0'|| clickedItem=='img0' ||clickedItem=='c1'){
            document.getElementById('curchat').innerHTML=convo1;
            curChat=0;

        }
        if(clickedItem=='p1'|| clickedItem=='info1' || clickedItem=='name1'|| clickedItem=='img1'||clickedItem=='c2'){
            document.getElementById('curchat').innerHTML=convo2;
            curChat=1;
        }if(clickedItem=='p2'|| clickedItem=='info2' || clickedItem=='name2'|| clickedItem=='img2'||clickedItem=='c3'){
            document.getElementById('curchat').innerHTML=convo3;
            curChat=2;
        }if(clickedItem=='p3'|| clickedItem=='info3' || clickedItem=='name3'|| clickedItem=='img3'||clickedItem=='c4'){
            document.getElementById('curchat').innerHTML=convo4;
            curChat=3;
        }if(clickedItem=='p4'|| clickedItem=='info4' || clickedItem=='name4'|| clickedItem=='img4'||clickedItem=='c5'){
            document.getElementById('curchat').innerHTML=convo5;
            curChat=4;
        }

    }


    function sendMsg(e){

        var x = document.getElementById("txtInput").value;

        var time =  new Date().getTime() / 1000;


        document.getElementById("curchat").innerHTML+=('<div class="container lighter"><img src="http://trade-mgmt.com/wp-content/uploads/2016/08/facebook-default-no-profile-pic.jpg" class="right" style="width:100%;">'+
            '<h3>'+x+'</h3></p><span class="time-left">11:20</span></div>');

        if(curChat==0){
            convo1=document.getElementById('curchat').innerHTML;
        }
        if(curChat==1){
            convo2=document.getElementById('curchat').innerHTML;
        }if(curChat==2){
            convo3=document.getElementById('curchat').innerHTML;
        }if(curChat==3){
            convo4=document.getElementById('curchat').innerHTML;
        }if(curChat==4){
            convo5=document.getElementById('curchat').innerHTML;
        }
    }



    var results = [];
    results.push(new Person("Antone Kimmons","M","Friend","Hey how are you?"));
    results.push(new Person("Arnold Heindel","M","Friend","Kleenex"));
    results.push(new Person("Arnulfo Roosevelt","M","NONE","Sprite"));
    results.push(new Person("Bret Champion","M","NONE","General Electric"  ));
    results.push(new Person("Carlie Hallee","F","Friend","Miss you!"  ));
    results.push(new Person("Chris Stannard","M","Brother","Prada" ));
    results.push(new Person("Chung Dwight","M","NONE","Nokia"   ));
    results.push(new Person("Cornell Breitenbach","M","Cousin","Google"   ));
    results.push(new Person("Dacia Loo","F","NONE","Siemens AG"  ));
    results.push(new Person("Danyell Bad","M","Friend","Avon"   ));
    results.push(new Person("Deadra Neill","F","NONE","JP Morgan"   ));

    results.push(new Person("Deanne Farnes","F","Friend","HSBC"    ));
    results.push(new Person("Diamond Sattler","F","Sister","Love all the pictures of the grandkids"  ));
    results.push(new Person("Erlene Saner","F","NONE","Tiffany & Co."   ));
    results.push(new Person("Evelina Jantzen","F","Cousin","Tesco Corporation" ));

    results.push(new Person("Fabian Saylor","M","NONE","Mitsubishi"   ));
    results.push(new Person("Hannah Fritz","F","Friend","Heineken Brewery"));

    results.push(new Person("Gloria Cort","F","Friend","Beko"    ));
    results.push(new Person("Irena Beachum","F","NONE","SAP"   ));

    results.push(new Person("Isaias Germann","M","Friend","Hewlett-Packard " ));
    results.push(new Person("Issac Oram","M","NONE","Grandson","Microsoft"   ));
    results.push(new Person("Ivelisse Segarra","F","Friend","Heineken Brewery "   ));
    results.push(new Person("Jere Carn","M","NONE","HSBC"   ));
    results.push(new Person("Jerome Frigo","M","NONE","Caterpillar Inc."));
    results.push(new Person("Jestine Primus","F","Friend","See you for lunch"  ));
    results.push(new Person("Kirsten Efird","F","NONE","Ferrari S.p.A."    ));
    results.push(new Person("Lawrence Moulder","M","Grandson,Nintendo"  ));
    results.push(new Person("Leonel Calvery","M","NONE","Canon"   ));
    results.push(new Person("Levi Sipe","M","Friend","Nintendo"   ));
    results.push(new Person("Lillian Hetzler","F","NONE","Canon "     ));
    results.push(new Person("Lino Overfiel","M","Cousin","Verizon Communications "  ));
    results.push(new Person("Lottie Desilva","F","NONE","Ralph Lauren Corporation"  ));
    results.push(new Person("Mardell Minchew","M","Brother","AT&T"  ));
    results.push(new Person("Maricruz Lever","M","Friend","MTV"   ));
    results.push(new Person("Mario Probst","M","NONE","Canon"   ));
    results.push(new Person("Maybelle Ennis","F","Grandaughter","Verizon Communications"   ));
    results.push(new Person("Merrilee Batt","F","NONE","AT&T"    ));
    results.push(new Person("Mike Bussard","M","Friend","MTV "  ));
    results.push(new Person("Neida Corpuz","F","NONE","Yahoo!"    ));
    results.push(new Person("Olive Creamer","M","NONE","Canon"  ));
    results.push(new Person("Ozell Swink","M","NONE","It was nice to meet you yesterday"  ));
    results.push(new Person("Paulette Breiner","F","Grandaughter"    ));
    results.push(new Person("Penny Guerrette","F","Friend","Yahoo!"    ));
    results.push(new Person("Raye Kanner","M","NONE","Canon"   ));
    results.push(new Person("Rey Bancroft","M","Friend","HSBC"   ));
    results.push(new Person("Robbie Ensminger","M","NONE","Tesco Corporation" ));
    results.push(new Person("Simonne Mctaggart","M","Grandson","Heineken Brewery"   ));
    results.push(new Person("Stacey Digby","F","NONE","Jack Daniel's"    ));
    results.push(new Person("Stephania Kerlin","F","Friend","Tesco Corporation"    ));
    results.push(new Person("Suzi Huck","F","NONE","Jack Daniel's "  ));
    results.push(new Person("Tiesha Pfister","F","Friend","HSBC"   ));
    results.push(new Person("Todd Baier","M","NONE","Heineken Brewery" ));
    results.push(new Person("Wilbur Carillo","M","NONE","HSBC" ));
    results.push(new Person("Wyatt Veillon","M","NONE","Tesco Corporation" ));

</script>
</body>
</html>
